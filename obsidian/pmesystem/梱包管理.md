# 梱包管理システム仕様

## 1. 概要
梱包管理システムは、BOM管理システムの一部として、プロジェクトごとの梱包リストを作成・管理し、発送情報や梱包状態を追跡する機能を提供します。

## 2. 主要機能

### 2.1 梱包リスト管理
- プロジェクトごとの梱包リスト作成
- 梱包リストの編集・削除
- 梱包リストの一覧表示
- 梱包リストの検索機能

### 2.2 梱包単位管理
- 梱包単位の作成・編集・削除
- 梱包単位ごとの部品リスト管理
- 梱包単位の状態管理
  - 準備中
  - 梱包済み
  - 発送済み

### 2.3 発送管理
- 発送元・発送先の管理
- 発送日時の記録
- 発送状態の追跡

### 2.4 重量管理
- 梱包単位ごとの重量計算
- プロジェクト全体の総重量表示
- 発送時の重量確認

### 2.5 一括梱包単位登録
- 未梱包部品の一括登録
  - BOM_PARTテーブルから未梱包の部品を検出
  - 梱包単位の自動生成
  - KONPO_TANNIテーブルへの一括登録
- 梱包単位の自動設定
  - 部品の種類に基づく梱包単位の決定
  - 数量に基づく梱包単位の分割
  - 梱包単位の優先順位付け

## 3. データベース連携

### 3.1 KONPO_LISTテーブル
- 梱包リストの基本情報管理
  - KONPO_LIST_ID: 梱包リストの識別子
  - PROJECT_ID: 関連するプロジェクト
  - WIGHT: 梱包の総重量
  - HASSOU_IN: 発送元情報
  - HASSOU_TO: 発送先情報
  - IMAGE_ID: 梱包画像の参照

### 3.2 KONPO_TANNIテーブル
- 梱包単位の詳細情報管理
  - KONPO_TANNI_ID: 梱包単位の識別子
  - ZUMEN_ID: 関連する図面
  - PART_KO: 部品の個数
  - ZENSU_KO: 全数での個数
  - KONPO_ID: 梱包ID

### 3.3 関連テーブル
- BOM_ZUMEN: 図面情報の参照
- BOM_PART: 部品情報の参照
- BOM_BUZAI: 部材情報の参照

## 4. 画面構成

### 4.1 梱包リスト一覧画面
- プロジェクトごとの梱包リスト表示
- 梱包状態の一覧表示
- 検索・フィルター機能
- 新規梱包リスト作成ボタン

### 4.2 梱包リスト詳細画面
- 梱包リストの基本情報表示
- 梱包単位の一覧表示
- 発送情報の表示・編集
- 重量情報の表示

### 4.3 梱包単位管理画面
- 梱包単位の詳細情報表示
- 部品リストの表示
- 梱包状態の更新
- 重量計算結果の表示
  - 部品一個分の重量
  - 部品個数×一個分の重量
  - 3桁ごとに上付きtで区切り
  - 小数点2桁表示
  - 等幅フォント・tabular-numsで表示

### 4.4 発送管理画面
- 発送情報の入力フォーム
- 発送状態の更新
- 発送履歴の表示

### 4.5 一括梱包単位登録画面
- 未梱包部品の一覧表示
  - 部品番号
  - 部品名
  - 数量
  - 梱包状態
- 梱包単位設定
  - 梱包単位の種類選択
  - 数量の自動計算
  - 優先順位の設定
- 登録オプション
  - 一括登録の実行
  - 登録前の確認
  - エラー処理の設定

## 5. 業務フロー

### 5.1 梱包リスト作成フロー
1. プロジェクト選択
2. 梱包単位の設定
3. 部品リストの確認
4. 発送情報の入力
5. 梱包リストの保存

### 5.2 梱包作業フロー
1. 梱包リストの表示
2. 梱包単位ごとの部品確認
3. 梱包作業の実施
4. 梱包状態の更新
5. 重量の確認

### 5.3 発送フロー
1. 発送情報の確認
2. 発送手続きの実施
3. 発送状態の更新
4. 発送完了の記録

### 5.4 一括梱包単位登録フロー
1. 未梱包部品の検出
2. 梱包単位の設定
3. 登録の実行
4. 結果の確認

## 6. 注意事項

### 6.1 データ整合性
- 梱包単位と部品の関連付けの正確性確保
- 重量計算の精度確保
- 発送情報の正確な記録

### 6.2 パフォーマンス
- 大量データ処理時の最適化
- 画像データの効率的な管理
- 検索機能の高速化

### 6.3 セキュリティ
- ユーザー権限の適切な設定
- 機密情報の保護
- データバックアップの実施

## 7. 今後の拡張予定

### 7.1 機能拡張
- バーコード/QRコード対応
- 発送業者との連携
- 在庫管理システムとの連携

### 7.2 システム改善
- モバイル対応
- 多言語対応
- パフォーマンス最適化 